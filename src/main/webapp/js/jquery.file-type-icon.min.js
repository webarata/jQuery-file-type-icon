/*! jQuery.file-type-icon - v0.1.0 - 2015-12-03 */
!function(a){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c,d){"use strict";var e={initIcon:"init.gif",initIconSize:{width:32,height:32},defaultIcon:"default.png",imageDir:"image/",classPrefix:"fti-",imageSize:{width:32,height:32}},f={},g={pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};a.fn.fileTypeIcon=function(b){var c=a.extend(e,b);h(),
// ファイルが指定されている場合にはそのタイプを優先する
c.file&&c.file.type&&(c.type=c.file.type);var d=this;return d.css({width:c.imageSize.width+"px",height:c.imageSize.height+"px",overflow:"hidden"}),d.hasClass(c.classPrefix+"around")||d.addClass(c.classPrefix+"around"),c.initIcon&&i(d,c),j(c).then(function(a){d.empty(),d.append(a)},function(){console.log("reject")}),this};var h=function(){f[g.pdf]="pdf-256.png",f[g.doc]="word-256.png",f[g.docx]="word-256.png",f[g.xls]="excel-256.png",f[g.xlsx]="excel-256.png",f[g.ppt]="powerpoint-256.png",f[g.pptx]="powerpoint-256.png"},i=function(b,c){var d=c.imageSize,e=a('<img src="'+c.imageDir+c.initIcon+'">');if(c.initIconSize.width<=d.width&&c.initIconSize.height<=d.height){
// 少なくとも画像サイズはimageSizeと同じか小さい
var f=(d.height-c.initIconSize.height)/2,g=(d.width-c.initIconSize.width)/2;e.css({position:"relative",top:f+"px",left:g+"px"}),b.empty(),b.append(e)}},j=function(b){var c,d=a.Deferred();if(b.type&&b.type.match(/image\/\w+/))b.file&&(c=k(b));else{var e=f[b.type]?f[b.type]:b.defaultIcon;c=l(b.imageDir+e,b)}return c?c.then(function(a){d.resolve(a)},function(){d.reject()}):d.reject(),d.promise()},k=function(b){var c=a.Deferred(),d=new FileReader;return d.onloadend=function(){l(d.result,b).then(function(a){c.resolve(a)},function(){c.reject()})},d.onerror=function(){c.reject()},d.readAsDataURL(b.file),c.promise()},l=function(b,c){var d=a.Deferred(),e=new Image,f=a(e);
// loadイベント後でないと、画像のサイズを取得できない場合がある。
return f.one("load",function(){m(f,e,c),d.resolve(f)}),f.attr("src",b),d.promise()},m=function(a,b,c){var d=c.imageSize,e={width:b.naturalWidth,height:b.naturalHeight},f={width:d.width/e.width,height:d.height/e.height},g="width",h="height";f.width>f.height&&(g="height",h="width"),
// 比率が1より大きければそのまま表示
f[g]>=1&&(f[g]=1);var i,j,k=(d[h]-e[h]*f[g])/2;"height"===h?i=k:j=k;var l=(d[g]-e[g]*f[g])/2;"height"===h?j=l:i=l;var m;
// IEの場合
// img要素に自動的にwidth、heightが指定されるため、明示的に指定する
if(m=e[g]>d[g]?d[g]:e[g],a.css(g,m),a.css("position","relative"),a.css("top",i+"px"),a.css("left",j+"px"),b.runtimeStyle){var n=b.runtimeStyle;n.width=e.width*f[g]+"px",n.height=e.height*f[g]+"px"}}});
//# sourceMappingURL=jquery.file-type-icon.min.js.map